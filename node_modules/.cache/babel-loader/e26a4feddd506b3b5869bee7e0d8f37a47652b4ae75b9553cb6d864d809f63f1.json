{"ast":null,"code":"import _objectSpread from\"/Users/mohanadbahammam/Desktop/task-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useEffect}from'react';import{useParams,Link}from'react-router-dom';import toast from'react-hot-toast';import AppLayout from'../layout/AppLayout';import{KanbanBoard}from'../components/kanban';import{Button}from'../components/ui/Button';import{Input,Textarea,Select}from'../components/ui/Input';import{Avatar}from'../components/ui/Avatar';import{StatusBadge,PriorityBadge}from'../components/ui/Badge';import{useConfirm}from'../components/feedback/ConfirmDialog';import{cn}from'../utils/cn';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_BASE='https://task-management-api-production-a18c.up.railway.app';function Tasks(){const{projectId}=useParams();const token=localStorage.getItem('token');const myUserId=Number(localStorage.getItem('user_id'));const{confirm}=useConfirm();const[tasks,setTasks]=useState([]);const[loading,setLoading]=useState(true);const[viewMode,setViewMode]=useState(()=>localStorage.getItem('taskViewMode')||'board');const[isCreating,setIsCreating]=useState(false);const[createForm,setCreateForm]=useState({title:'',description:'',status:'todo',priority:'medium'});const[teamMembers,setTeamMembers]=useState([]);const[myRole,setMyRole]=useState(null);const[teamId,setTeamId]=useState(null);const[projectName,setProjectName]=useState('');const[assigneesByTask,setAssigneesByTask]=useState({});const[slideOver,setSlideOver]=useState({open:false,task:null,tab:'details'});const[assignees,setAssignees]=useState([]);const[selectedUserId,setSelectedUserId]=useState('');const[comments,setComments]=useState([]);const[commentText,setCommentText]=useState('');const[editingCommentId,setEditingCommentId]=useState(null);const[commentEditText,setCommentEditText]=useState('');const[editForm,setEditForm]=useState(null);const transformTask=t=>({id:t[0],projectId:t[1],title:t[2],description:t[3],status:t[4],priority:t[5]});const fetchTasks=async()=>{try{const res=await fetch(\"\".concat(API_BASE,\"/projects/\").concat(projectId,\"/tasks\"),{headers:{Authorization:\"Bearer \".concat(token)}});const data=await res.json();const taskList=(data.Tasks||[]).map(transformTask);setTasks(taskList);// Fetch assignees for all tasks\nconst assigneesMap={};await Promise.all(taskList.map(async task=>{try{const aRes=await fetch(\"\".concat(API_BASE,\"/tasks/\").concat(task.id,\"/assignees\"),{headers:{Authorization:\"Bearer \".concat(token)}});const aData=await aRes.json();assigneesMap[task.id]=aData[\"Assigned to :\"]||[];}catch(_unused){assigneesMap[task.id]=[];}}));setAssigneesByTask(assigneesMap);}catch(err){toast.error('Failed to load tasks');}finally{setLoading(false);}};useEffect(()=>{fetchTasks();},[projectId,token]);useEffect(()=>{if(!projectId)return;fetch(\"\".concat(API_BASE,\"/projects/\").concat(projectId),{headers:{Authorization:\"Bearer \".concat(token)}}).then(res=>res.json()).then(data=>{const project=data.message||data;setTeamId(project[1]);setProjectName(project[2]);return fetch(\"\".concat(API_BASE,\"/teams/\").concat(project[1],\"/members\"),{headers:{Authorization:\"Bearer \".concat(token)}});}).then(res=>res.json()).then(data=>{const list=data.members||[];setTeamMembers(list);const me=list.find(m=>m[0]===myUserId);setMyRole(me?me[2]:null);}).catch(console.error);},[projectId,myUserId,token]);const canAssign=myRole==='owner'||myRole==='admin';const handleViewModeChange=mode=>{setViewMode(mode);localStorage.setItem('taskViewMode',mode);};const createTask=async()=>{if(!createForm.title.trim()){toast.error('Please enter a task title');return;}try{await fetch(\"\".concat(API_BASE,\"/projects/\").concat(projectId,\"/tasks\"),{method:'POST',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify(_objectSpread(_objectSpread({},createForm),{},{due_date:null}))});toast.success('Task created');setCreateForm({title:'',description:'',status:'todo',priority:'medium'});setIsCreating(false);fetchTasks();}catch(_unused2){toast.error('Failed to create task');}};const handleStatusChange=async(taskId,newStatus)=>{const prevTasks=[...tasks];setTasks(tasks.map(t=>t.id===taskId?_objectSpread(_objectSpread({},t),{},{status:newStatus}):t));try{const task=tasks.find(t=>t.id===taskId);await fetch(\"\".concat(API_BASE,\"/tasks/\").concat(taskId),{method:'PUT',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify({title:task.title,description:task.description,status:newStatus,priority:task.priority,due_date:null})});toast.success('Task updated');}catch(_unused3){setTasks(prevTasks);toast.error('Failed to update task');}};const handleDelete=async task=>{const confirmed=await confirm({title:'Delete Task',message:\"Are you sure you want to delete \\\"\".concat(task.title,\"\\\"? This action cannot be undone.\"),confirmText:'Delete',variant:'danger'});if(confirmed){try{var _slideOver$task;await fetch(\"\".concat(API_BASE,\"/tasks/\").concat(task.id),{method:'DELETE',headers:{Authorization:\"Bearer \".concat(token)}});toast.success('Task deleted');fetchTasks();if(((_slideOver$task=slideOver.task)===null||_slideOver$task===void 0?void 0:_slideOver$task.id)===task.id){setSlideOver({open:false,task:null,tab:'details'});}}catch(_unused4){toast.error('Failed to delete task');}}};const openSlideOver=function(task){let tab=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'details';setSlideOver({open:true,task,tab});setEditForm(_objectSpread({},task));fetchAssignees(task.id);fetchComments(task.id);};const closeSlideOver=()=>{setSlideOver({open:false,task:null,tab:'details'});setAssignees([]);setComments([]);setEditForm(null);};const saveEdit=async()=>{if(!editForm||!slideOver.task)return;try{await fetch(\"\".concat(API_BASE,\"/tasks/\").concat(slideOver.task.id),{method:'PUT',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify(_objectSpread(_objectSpread({},editForm),{},{due_date:null}))});toast.success('Task updated');fetchTasks();setSlideOver(s=>_objectSpread(_objectSpread({},s),{},{task:_objectSpread(_objectSpread({},s.task),editForm)}));}catch(_unused5){toast.error('Failed to update task');}};const fetchAssignees=async taskId=>{try{const res=await fetch(\"\".concat(API_BASE,\"/tasks/\").concat(taskId,\"/assignees\"),{headers:{Authorization:\"Bearer \".concat(token)}});const data=await res.json();setAssignees(data[\"Assigned to :\"]||[]);}catch(_unused6){setAssignees([]);}};const assignUser=async()=>{if(!selectedUserId||!slideOver.task)return;try{await fetch(\"\".concat(API_BASE,\"/tasks/\").concat(slideOver.task.id,\"/assign\"),{method:'POST',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify({user_ids:[Number(selectedUserId)]})});toast.success('User assigned');fetchAssignees(slideOver.task.id);setSelectedUserId('');fetchTasks();}catch(_unused7){toast.error('Failed to assign user');}};const unassignUser=async userId=>{if(!slideOver.task)return;try{await fetch(\"\".concat(API_BASE,\"/tasks/\").concat(slideOver.task.id,\"/unassign/\").concat(userId),{method:'DELETE',headers:{Authorization:\"Bearer \".concat(token)}});toast.success('User removed');fetchAssignees(slideOver.task.id);fetchTasks();}catch(_unused8){toast.error('Failed to remove user');}};const fetchComments=async taskId=>{try{const res=await fetch(\"\".concat(API_BASE,\"/tasks/\").concat(taskId,\"/comments\"),{headers:{Authorization:\"Bearer \".concat(token)}});const data=await res.json();setComments(data.Comments||[]);}catch(_unused9){setComments([]);}};const addComment=async()=>{if(!commentText.trim()||!slideOver.task)return;try{await fetch(\"\".concat(API_BASE,\"/tasks/\").concat(slideOver.task.id,\"/comments\"),{method:'POST',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify({comment:commentText})});toast.success('Comment added');setCommentText('');fetchComments(slideOver.task.id);}catch(_unused0){toast.error('Failed to add comment');}};const deleteComment=async commentId=>{const confirmed=await confirm({title:'Delete Comment',message:'Are you sure you want to delete this comment?',confirmText:'Delete',variant:'danger'});if(confirmed){try{await fetch(\"\".concat(API_BASE,\"/comments/\").concat(commentId),{method:'DELETE',headers:{Authorization:\"Bearer \".concat(token)}});toast.success('Comment deleted');fetchComments(slideOver.task.id);}catch(_unused1){toast.error('Failed to delete comment');}}};const saveEditComment=async commentId=>{try{await fetch(\"\".concat(API_BASE,\"/comments/\").concat(commentId),{method:'PUT',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify({comment:commentEditText})});toast.success('Comment updated');setEditingCommentId(null);setCommentEditText('');fetchComments(slideOver.task.id);}catch(_unused10){toast.error('Failed to update comment');}};const breadcrumb=/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm mb-4\",children:[/*#__PURE__*/_jsx(Link,{to:\"/teams\",className:\"text-gray-500 hover:text-gray-700\",children:\"Teams\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-300\",children:\"/\"}),/*#__PURE__*/_jsx(Link,{to:\"/teams/\".concat(teamId,\"/projects\"),className:\"text-gray-500 hover:text-gray-700\",children:\"Projects\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-300\",children:\"/\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-900 font-medium\",children:\"Tasks\"})]});return/*#__PURE__*/_jsxs(AppLayout,{children:[breadcrumb,/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-semibold text-gray-900\",children:projectName||'Tasks'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-1\",children:\"Manage tasks and track progress\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex bg-gray-100 rounded-lg p-1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleViewModeChange('board'),className:cn('px-3 py-1.5 text-sm font-medium rounded-md transition-colors',viewMode==='board'?'bg-white text-gray-900 shadow-sm':'text-gray-600'),children:\"Board\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleViewModeChange('list'),className:cn('px-3 py-1.5 text-sm font-medium rounded-md transition-colors',viewMode==='list'?'bg-white text-gray-900 shadow-sm':'text-gray-600'),children:\"List\"})]}),/*#__PURE__*/_jsx(Button,{onClick:()=>setIsCreating(!isCreating),children:isCreating?'Cancel':'+ New Task'})]})]}),isCreating&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg border border-gray-200 p-5 mb-6 animate-fade-in\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Create New Task\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1.5\",children:\"Title\"}),/*#__PURE__*/_jsx(Input,{placeholder:\"Task title\",value:createForm.title,onChange:e=>setCreateForm(f=>_objectSpread(_objectSpread({},f),{},{title:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1.5\",children:\"Description\"}),/*#__PURE__*/_jsx(Textarea,{placeholder:\"Add description...\",value:createForm.description,onChange:e=>setCreateForm(f=>_objectSpread(_objectSpread({},f),{},{description:e.target.value})),rows:3})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1.5\",children:\"Status\"}),/*#__PURE__*/_jsxs(Select,{value:createForm.status,onChange:e=>setCreateForm(f=>_objectSpread(_objectSpread({},f),{},{status:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"todo\",children:\"To Do\"}),/*#__PURE__*/_jsx(\"option\",{value:\"in_progress\",children:\"In Progress\"}),/*#__PURE__*/_jsx(\"option\",{value:\"done\",children:\"Done\"}),/*#__PURE__*/_jsx(\"option\",{value:\"blocked\",children:\"Blocked\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1.5\",children:\"Priority\"}),/*#__PURE__*/_jsxs(Select,{value:createForm.priority,onChange:e=>setCreateForm(f=>_objectSpread(_objectSpread({},f),{},{priority:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"low\",children:\"Low\"}),/*#__PURE__*/_jsx(\"option\",{value:\"medium\",children:\"Medium\"}),/*#__PURE__*/_jsx(\"option\",{value:\"high\",children:\"High\"}),/*#__PURE__*/_jsx(\"option\",{value:\"urgent\",children:\"Urgent\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(Button,{onClick:createTask,children:\"Create Task\"}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:()=>{setIsCreating(false);setCreateForm({title:'',description:'',status:'todo',priority:'medium'});},children:\"Cancel\"})]})]})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-4 gap-4\",children:[1,2,3,4].map(i=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-100 rounded-lg h-64 animate-pulse\"},i))}):tasks.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg border border-gray-200 p-12 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(ClipboardIcon,{className:\"w-8 h-8 text-gray-400\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No tasks yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mb-4\",children:\"Create your first task to get started\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>setIsCreating(true),children:\"Create Task\"})]}):viewMode==='board'?/*#__PURE__*/_jsx(KanbanBoard,{tasks:tasks,assigneesByTask:assigneesByTask,onStatusChange:handleStatusChange,onEdit:task=>openSlideOver(task,'details'),onDelete:handleDelete,onAssign:task=>openSlideOver(task,'assign'),onComment:task=>openSlideOver(task,'comments')}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:tasks.map(task=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-card transition-shadow cursor-pointer\",onClick:()=>openSlideOver(task),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-medium text-gray-900\",children:task.title}),task.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-1 line-clamp-1\",children:task.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(StatusBadge,{status:task.status}),/*#__PURE__*/_jsx(PriorityBadge,{priority:task.priority})]})]})},task.id))}),slideOver.open&&slideOver.task&&/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 z-50 overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black/20\",onClick:closeSlideOver}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute inset-y-0 right-0 w-full max-w-md bg-white shadow-modal animate-slide-in-right flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between px-5 py-4 border-b border-gray-200\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900\",children:\"Task Details\"}),/*#__PURE__*/_jsx(\"button\",{onClick:closeSlideOver,className:\"p-1 text-gray-400 hover:text-gray-600 rounded\",children:/*#__PURE__*/_jsx(XIcon,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex border-b border-gray-200\",children:['details','assign','comments'].map(tab=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSlideOver(s=>_objectSpread(_objectSpread({},s),{},{tab})),className:cn('flex-1 px-4 py-2.5 text-sm font-medium transition-colors',slideOver.tab===tab?'text-gray-900 border-b-2 border-gray-900':'text-gray-500 hover:text-gray-700'),children:tab.charAt(0).toUpperCase()+tab.slice(1)},tab))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto p-5\",children:[slideOver.tab==='details'&&editForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1.5\",children:\"Title\"}),/*#__PURE__*/_jsx(Input,{value:editForm.title,onChange:e=>setEditForm(f=>_objectSpread(_objectSpread({},f),{},{title:e.target.value}))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1.5\",children:\"Description\"}),/*#__PURE__*/_jsx(Textarea,{value:editForm.description,onChange:e=>setEditForm(f=>_objectSpread(_objectSpread({},f),{},{description:e.target.value})),rows:4})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1.5\",children:\"Status\"}),/*#__PURE__*/_jsxs(Select,{value:editForm.status,onChange:e=>setEditForm(f=>_objectSpread(_objectSpread({},f),{},{status:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"todo\",children:\"To Do\"}),/*#__PURE__*/_jsx(\"option\",{value:\"in_progress\",children:\"In Progress\"}),/*#__PURE__*/_jsx(\"option\",{value:\"done\",children:\"Done\"}),/*#__PURE__*/_jsx(\"option\",{value:\"blocked\",children:\"Blocked\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1.5\",children:\"Priority\"}),/*#__PURE__*/_jsxs(Select,{value:editForm.priority,onChange:e=>setEditForm(f=>_objectSpread(_objectSpread({},f),{},{priority:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"low\",children:\"Low\"}),/*#__PURE__*/_jsx(\"option\",{value:\"medium\",children:\"Medium\"}),/*#__PURE__*/_jsx(\"option\",{value:\"high\",children:\"High\"}),/*#__PURE__*/_jsx(\"option\",{value:\"urgent\",children:\"Urgent\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 pt-2\",children:[/*#__PURE__*/_jsx(Button,{onClick:saveEdit,children:\"Save Changes\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:()=>handleDelete(slideOver.task),children:\"Delete Task\"})]})]}),slideOver.tab==='assign'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[canAssign&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsxs(Select,{value:selectedUserId,onChange:e=>setSelectedUserId(e.target.value),className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select member\"}),teamMembers.map(m=>/*#__PURE__*/_jsxs(\"option\",{value:m[0],children:[m[4],\" (\",m[5],\")\"]},m[0]))]}),/*#__PURE__*/_jsx(Button,{onClick:assignUser,children:\"Assign\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-medium text-gray-700 mb-3\",children:\"Assigned Members\"}),assignees.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 text-center py-6\",children:\"No assignees yet\"}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:assignees.map((a,idx)=>{const uid=a[1]||a[0];const label=a[2]||\"User \".concat(uid);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between bg-gray-50 rounded-lg p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Avatar,{name:label,size:\"sm\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-900\",children:label})]}),canAssign&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>unassignUser(uid),className:\"text-xs text-red-600 hover:text-red-700 font-medium\",children:\"Remove\"})]},\"\".concat(uid,\"-\").concat(idx));})})]})]}),slideOver.tab==='comments'&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(Input,{placeholder:\"Write a comment...\",value:commentText,onChange:e=>setCommentText(e.target.value),onKeyDown:e=>e.key==='Enter'&&addComment()}),/*#__PURE__*/_jsx(Button,{onClick:addComment,children:\"Add\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:comments.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 text-center py-6\",children:\"No comments yet\"}):comments.map(c=>{const cid=c[0];const text=c[2];const authorId=c[3];const authorName=c[4]||'Unknown';const canEdit=authorId===myUserId;return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 rounded-lg p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3\",children:[/*#__PURE__*/_jsx(Avatar,{name:authorName,size:\"sm\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:authorName}),editingCommentId===cid?/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 space-y-2\",children:[/*#__PURE__*/_jsx(Input,{value:commentEditText,onChange:e=>setCommentEditText(e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(Button,{size:\"sm\",onClick:()=>saveEditComment(cid),children:\"Save\"}),/*#__PURE__*/_jsx(Button,{size:\"sm\",variant:\"secondary\",onClick:()=>{setEditingCommentId(null);setCommentEditText('');},children:\"Cancel\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:text}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 mt-2\",children:[canEdit&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingCommentId(cid);setCommentEditText(text);},className:\"text-xs text-gray-500 hover:text-gray-700\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteComment(cid),className:\"text-xs text-red-500 hover:text-red-700\",children:\"Delete\"})]})]})]})]})},cid);})})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8\",children:/*#__PURE__*/_jsxs(Link,{to:\"/teams/\".concat(teamId,\"/projects\"),className:\"inline-flex items-center text-sm text-gray-500 hover:text-gray-700\",children:[/*#__PURE__*/_jsx(ArrowLeftIcon,{className:\"w-4 h-4 mr-1.5\"}),\"Back to Projects\"]})})]});}function ClipboardIcon(_ref){let{className}=_ref;return/*#__PURE__*/_jsx(\"svg\",{className:className,fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",strokeWidth:2,children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\"})});}function XIcon(_ref2){let{className}=_ref2;return/*#__PURE__*/_jsx(\"svg\",{className:className,fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",strokeWidth:2,children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M6 18L18 6M6 6l12 12\"})});}function ArrowLeftIcon(_ref3){let{className}=_ref3;return/*#__PURE__*/_jsx(\"svg\",{className:className,fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",strokeWidth:2,children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M10 19l-7-7m0 0l7-7m-7 7h18\"})});}export default Tasks;","map":{"version":3,"names":["useState","useEffect","useParams","Link","toast","AppLayout","KanbanBoard","Button","Input","Textarea","Select","Avatar","StatusBadge","PriorityBadge","useConfirm","cn","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_BASE","Tasks","projectId","token","localStorage","getItem","myUserId","Number","confirm","tasks","setTasks","loading","setLoading","viewMode","setViewMode","isCreating","setIsCreating","createForm","setCreateForm","title","description","status","priority","teamMembers","setTeamMembers","myRole","setMyRole","teamId","setTeamId","projectName","setProjectName","assigneesByTask","setAssigneesByTask","slideOver","setSlideOver","open","task","tab","assignees","setAssignees","selectedUserId","setSelectedUserId","comments","setComments","commentText","setCommentText","editingCommentId","setEditingCommentId","commentEditText","setCommentEditText","editForm","setEditForm","transformTask","t","id","fetchTasks","res","fetch","concat","headers","Authorization","data","json","taskList","map","assigneesMap","Promise","all","aRes","aData","_unused","err","error","then","project","message","list","members","me","find","m","catch","console","canAssign","handleViewModeChange","mode","setItem","createTask","trim","method","body","JSON","stringify","_objectSpread","due_date","success","_unused2","handleStatusChange","taskId","newStatus","prevTasks","_unused3","handleDelete","confirmed","confirmText","variant","_slideOver$task","_unused4","openSlideOver","arguments","length","undefined","fetchAssignees","fetchComments","closeSlideOver","saveEdit","s","_unused5","_unused6","assignUser","user_ids","_unused7","unassignUser","userId","_unused8","Comments","_unused9","addComment","comment","_unused0","deleteComment","commentId","_unused1","saveEditComment","_unused10","breadcrumb","className","children","to","onClick","placeholder","value","onChange","e","f","target","rows","i","ClipboardIcon","onStatusChange","onEdit","onDelete","onAssign","onComment","XIcon","charAt","toUpperCase","slice","a","idx","uid","label","name","size","onKeyDown","key","c","cid","text","authorId","authorName","canEdit","ArrowLeftIcon","_ref","fill","viewBox","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","_ref2","_ref3"],"sources":["/Users/mohanadbahammam/Desktop/task-frontend/src/endpoint/Tasks.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport toast from 'react-hot-toast';\nimport AppLayout from '../layout/AppLayout';\nimport { KanbanBoard } from '../components/kanban';\nimport { Button } from '../components/ui/Button';\nimport { Input, Textarea, Select } from '../components/ui/Input';\nimport { Avatar } from '../components/ui/Avatar';\nimport { StatusBadge, PriorityBadge } from '../components/ui/Badge';\nimport { useConfirm } from '../components/feedback/ConfirmDialog';\nimport { cn } from '../utils/cn';\n\nconst API_BASE = 'https://task-management-api-production-a18c.up.railway.app';\n\nfunction Tasks() {\n  const { projectId } = useParams();\n  const token = localStorage.getItem('token');\n  const myUserId = Number(localStorage.getItem('user_id'));\n  const { confirm } = useConfirm();\n\n  const [tasks, setTasks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [viewMode, setViewMode] = useState(() => localStorage.getItem('taskViewMode') || 'board');\n\n  const [isCreating, setIsCreating] = useState(false);\n  const [createForm, setCreateForm] = useState({\n    title: '',\n    description: '',\n    status: 'todo',\n    priority: 'medium'\n  });\n\n  const [teamMembers, setTeamMembers] = useState([]);\n  const [myRole, setMyRole] = useState(null);\n  const [teamId, setTeamId] = useState(null);\n  const [projectName, setProjectName] = useState('');\n\n  const [assigneesByTask, setAssigneesByTask] = useState({});\n  const [slideOver, setSlideOver] = useState({ open: false, task: null, tab: 'details' });\n\n  const [assignees, setAssignees] = useState([]);\n  const [selectedUserId, setSelectedUserId] = useState('');\n  const [comments, setComments] = useState([]);\n  const [commentText, setCommentText] = useState('');\n  const [editingCommentId, setEditingCommentId] = useState(null);\n  const [commentEditText, setCommentEditText] = useState('');\n  const [editForm, setEditForm] = useState(null);\n\n  const transformTask = (t) => ({\n    id: t[0],\n    projectId: t[1],\n    title: t[2],\n    description: t[3],\n    status: t[4],\n    priority: t[5],\n  });\n\n  const fetchTasks = async () => {\n    try {\n      const res = await fetch(`${API_BASE}/projects/${projectId}/tasks`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      const data = await res.json();\n      const taskList = (data.Tasks || []).map(transformTask);\n      setTasks(taskList);\n\n      // Fetch assignees for all tasks\n      const assigneesMap = {};\n      await Promise.all(taskList.map(async (task) => {\n        try {\n          const aRes = await fetch(`${API_BASE}/tasks/${task.id}/assignees`, {\n            headers: { Authorization: `Bearer ${token}` }\n          });\n          const aData = await aRes.json();\n          assigneesMap[task.id] = aData[\"Assigned to :\"] || [];\n        } catch {\n          assigneesMap[task.id] = [];\n        }\n      }));\n      setAssigneesByTask(assigneesMap);\n    } catch (err) {\n      toast.error('Failed to load tasks');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchTasks();\n  }, [projectId, token]);\n\n  useEffect(() => {\n    if (!projectId) return;\n\n    fetch(`${API_BASE}/projects/${projectId}`, {\n      headers: { Authorization: `Bearer ${token}` }\n    })\n      .then(res => res.json())\n      .then(data => {\n        const project = data.message || data;\n        setTeamId(project[1]);\n        setProjectName(project[2]);\n\n        return fetch(`${API_BASE}/teams/${project[1]}/members`, {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n      })\n      .then(res => res.json())\n      .then(data => {\n        const list = data.members || [];\n        setTeamMembers(list);\n        const me = list.find(m => m[0] === myUserId);\n        setMyRole(me ? me[2] : null);\n      })\n      .catch(console.error);\n  }, [projectId, myUserId, token]);\n\n  const canAssign = myRole === 'owner' || myRole === 'admin';\n\n  const handleViewModeChange = (mode) => {\n    setViewMode(mode);\n    localStorage.setItem('taskViewMode', mode);\n  };\n\n  const createTask = async () => {\n    if (!createForm.title.trim()) {\n      toast.error('Please enter a task title');\n      return;\n    }\n\n    try {\n      await fetch(`${API_BASE}/projects/${projectId}/tasks`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({ ...createForm, due_date: null })\n      });\n      toast.success('Task created');\n      setCreateForm({ title: '', description: '', status: 'todo', priority: 'medium' });\n      setIsCreating(false);\n      fetchTasks();\n    } catch {\n      toast.error('Failed to create task');\n    }\n  };\n\n  const handleStatusChange = async (taskId, newStatus) => {\n    const prevTasks = [...tasks];\n    setTasks(tasks.map(t => t.id === taskId ? { ...t, status: newStatus } : t));\n\n    try {\n      const task = tasks.find(t => t.id === taskId);\n      await fetch(`${API_BASE}/tasks/${taskId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          title: task.title,\n          description: task.description,\n          status: newStatus,\n          priority: task.priority,\n          due_date: null\n        })\n      });\n      toast.success('Task updated');\n    } catch {\n      setTasks(prevTasks);\n      toast.error('Failed to update task');\n    }\n  };\n\n  const handleDelete = async (task) => {\n    const confirmed = await confirm({\n      title: 'Delete Task',\n      message: `Are you sure you want to delete \"${task.title}\"? This action cannot be undone.`,\n      confirmText: 'Delete',\n      variant: 'danger'\n    });\n\n    if (confirmed) {\n      try {\n        await fetch(`${API_BASE}/tasks/${task.id}`, {\n          method: 'DELETE',\n          headers: { Authorization: `Bearer ${token}` }\n        });\n        toast.success('Task deleted');\n        fetchTasks();\n        if (slideOver.task?.id === task.id) {\n          setSlideOver({ open: false, task: null, tab: 'details' });\n        }\n      } catch {\n        toast.error('Failed to delete task');\n      }\n    }\n  };\n\n  const openSlideOver = (task, tab = 'details') => {\n    setSlideOver({ open: true, task, tab });\n    setEditForm({ ...task });\n    fetchAssignees(task.id);\n    fetchComments(task.id);\n  };\n\n  const closeSlideOver = () => {\n    setSlideOver({ open: false, task: null, tab: 'details' });\n    setAssignees([]);\n    setComments([]);\n    setEditForm(null);\n  };\n\n  const saveEdit = async () => {\n    if (!editForm || !slideOver.task) return;\n\n    try {\n      await fetch(`${API_BASE}/tasks/${slideOver.task.id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({ ...editForm, due_date: null })\n      });\n      toast.success('Task updated');\n      fetchTasks();\n      setSlideOver(s => ({ ...s, task: { ...s.task, ...editForm } }));\n    } catch {\n      toast.error('Failed to update task');\n    }\n  };\n\n  const fetchAssignees = async (taskId) => {\n    try {\n      const res = await fetch(`${API_BASE}/tasks/${taskId}/assignees`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      const data = await res.json();\n      setAssignees(data[\"Assigned to :\"] || []);\n    } catch {\n      setAssignees([]);\n    }\n  };\n\n  const assignUser = async () => {\n    if (!selectedUserId || !slideOver.task) return;\n\n    try {\n      await fetch(`${API_BASE}/tasks/${slideOver.task.id}/assign`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({ user_ids: [Number(selectedUserId)] })\n      });\n      toast.success('User assigned');\n      fetchAssignees(slideOver.task.id);\n      setSelectedUserId('');\n      fetchTasks();\n    } catch {\n      toast.error('Failed to assign user');\n    }\n  };\n\n  const unassignUser = async (userId) => {\n    if (!slideOver.task) return;\n\n    try {\n      await fetch(`${API_BASE}/tasks/${slideOver.task.id}/unassign/${userId}`, {\n        method: 'DELETE',\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      toast.success('User removed');\n      fetchAssignees(slideOver.task.id);\n      fetchTasks();\n    } catch {\n      toast.error('Failed to remove user');\n    }\n  };\n\n  const fetchComments = async (taskId) => {\n    try {\n      const res = await fetch(`${API_BASE}/tasks/${taskId}/comments`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      const data = await res.json();\n      setComments(data.Comments || []);\n    } catch {\n      setComments([]);\n    }\n  };\n\n  const addComment = async () => {\n    if (!commentText.trim() || !slideOver.task) return;\n\n    try {\n      await fetch(`${API_BASE}/tasks/${slideOver.task.id}/comments`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({ comment: commentText })\n      });\n      toast.success('Comment added');\n      setCommentText('');\n      fetchComments(slideOver.task.id);\n    } catch {\n      toast.error('Failed to add comment');\n    }\n  };\n\n  const deleteComment = async (commentId) => {\n    const confirmed = await confirm({\n      title: 'Delete Comment',\n      message: 'Are you sure you want to delete this comment?',\n      confirmText: 'Delete',\n      variant: 'danger'\n    });\n\n    if (confirmed) {\n      try {\n        await fetch(`${API_BASE}/comments/${commentId}`, {\n          method: 'DELETE',\n          headers: { Authorization: `Bearer ${token}` }\n        });\n        toast.success('Comment deleted');\n        fetchComments(slideOver.task.id);\n      } catch {\n        toast.error('Failed to delete comment');\n      }\n    }\n  };\n\n  const saveEditComment = async (commentId) => {\n    try {\n      await fetch(`${API_BASE}/comments/${commentId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({ comment: commentEditText })\n      });\n      toast.success('Comment updated');\n      setEditingCommentId(null);\n      setCommentEditText('');\n      fetchComments(slideOver.task.id);\n    } catch {\n      toast.error('Failed to update comment');\n    }\n  };\n\n  const breadcrumb = (\n    <div className=\"flex items-center gap-2 text-sm mb-4\">\n      <Link to=\"/teams\" className=\"text-gray-500 hover:text-gray-700\">Teams</Link>\n      <span className=\"text-gray-300\">/</span>\n      <Link to={`/teams/${teamId}/projects`} className=\"text-gray-500 hover:text-gray-700\">Projects</Link>\n      <span className=\"text-gray-300\">/</span>\n      <span className=\"text-gray-900 font-medium\">Tasks</span>\n    </div>\n  );\n\n  return (\n    <AppLayout>\n      {breadcrumb}\n\n      <div className=\"flex items-center justify-between mb-6\">\n        <div>\n          <h1 className=\"text-2xl font-semibold text-gray-900\">{projectName || 'Tasks'}</h1>\n          <p className=\"text-sm text-gray-500 mt-1\">Manage tasks and track progress</p>\n        </div>\n        <div className=\"flex items-center gap-3\">\n          <div className=\"flex bg-gray-100 rounded-lg p-1\">\n            <button\n              onClick={() => handleViewModeChange('board')}\n              className={cn(\n                'px-3 py-1.5 text-sm font-medium rounded-md transition-colors',\n                viewMode === 'board' ? 'bg-white text-gray-900 shadow-sm' : 'text-gray-600'\n              )}\n            >\n              Board\n            </button>\n            <button\n              onClick={() => handleViewModeChange('list')}\n              className={cn(\n                'px-3 py-1.5 text-sm font-medium rounded-md transition-colors',\n                viewMode === 'list' ? 'bg-white text-gray-900 shadow-sm' : 'text-gray-600'\n              )}\n            >\n              List\n            </button>\n          </div>\n          <Button onClick={() => setIsCreating(!isCreating)}>\n            {isCreating ? 'Cancel' : '+ New Task'}\n          </Button>\n        </div>\n      </div>\n\n      {isCreating && (\n        <div className=\"bg-white rounded-lg border border-gray-200 p-5 mb-6 animate-fade-in\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Create New Task</h3>\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">Title</label>\n              <Input\n                placeholder=\"Task title\"\n                value={createForm.title}\n                onChange={(e) => setCreateForm(f => ({ ...f, title: e.target.value }))}\n              />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">Description</label>\n              <Textarea\n                placeholder=\"Add description...\"\n                value={createForm.description}\n                onChange={(e) => setCreateForm(f => ({ ...f, description: e.target.value }))}\n                rows={3}\n              />\n            </div>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">Status</label>\n                <Select\n                  value={createForm.status}\n                  onChange={(e) => setCreateForm(f => ({ ...f, status: e.target.value }))}\n                >\n                  <option value=\"todo\">To Do</option>\n                  <option value=\"in_progress\">In Progress</option>\n                  <option value=\"done\">Done</option>\n                  <option value=\"blocked\">Blocked</option>\n                </Select>\n              </div>\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">Priority</label>\n                <Select\n                  value={createForm.priority}\n                  onChange={(e) => setCreateForm(f => ({ ...f, priority: e.target.value }))}\n                >\n                  <option value=\"low\">Low</option>\n                  <option value=\"medium\">Medium</option>\n                  <option value=\"high\">High</option>\n                  <option value=\"urgent\">Urgent</option>\n                </Select>\n              </div>\n            </div>\n            <div className=\"flex gap-3\">\n              <Button onClick={createTask}>Create Task</Button>\n              <Button\n                variant=\"secondary\"\n                onClick={() => {\n                  setIsCreating(false);\n                  setCreateForm({ title: '', description: '', status: 'todo', priority: 'medium' });\n                }}\n              >\n                Cancel\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {loading ? (\n        <div className=\"grid grid-cols-4 gap-4\">\n          {[1, 2, 3, 4].map(i => (\n            <div key={i} className=\"bg-gray-100 rounded-lg h-64 animate-pulse\" />\n          ))}\n        </div>\n      ) : tasks.length === 0 ? (\n        <div className=\"bg-white rounded-lg border border-gray-200 p-12 text-center\">\n          <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <ClipboardIcon className=\"w-8 h-8 text-gray-400\" />\n          </div>\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No tasks yet</h3>\n          <p className=\"text-sm text-gray-500 mb-4\">Create your first task to get started</p>\n          <Button onClick={() => setIsCreating(true)}>Create Task</Button>\n        </div>\n      ) : viewMode === 'board' ? (\n        <KanbanBoard\n          tasks={tasks}\n          assigneesByTask={assigneesByTask}\n          onStatusChange={handleStatusChange}\n          onEdit={(task) => openSlideOver(task, 'details')}\n          onDelete={handleDelete}\n          onAssign={(task) => openSlideOver(task, 'assign')}\n          onComment={(task) => openSlideOver(task, 'comments')}\n        />\n      ) : (\n        <div className=\"space-y-3\">\n          {tasks.map(task => (\n            <div\n              key={task.id}\n              className=\"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-card transition-shadow cursor-pointer\"\n              onClick={() => openSlideOver(task)}\n            >\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex-1\">\n                  <h4 className=\"font-medium text-gray-900\">{task.title}</h4>\n                  {task.description && (\n                    <p className=\"text-sm text-gray-500 mt-1 line-clamp-1\">{task.description}</p>\n                  )}\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <StatusBadge status={task.status} />\n                  <PriorityBadge priority={task.priority} />\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Slide-over Panel */}\n      {slideOver.open && slideOver.task && (\n        <div className=\"fixed inset-0 z-50 overflow-hidden\">\n          <div className=\"absolute inset-0 bg-black/20\" onClick={closeSlideOver} />\n          <div className=\"absolute inset-y-0 right-0 w-full max-w-md bg-white shadow-modal animate-slide-in-right flex flex-col\">\n            <div className=\"flex items-center justify-between px-5 py-4 border-b border-gray-200\">\n              <h2 className=\"text-lg font-semibold text-gray-900\">Task Details</h2>\n              <button onClick={closeSlideOver} className=\"p-1 text-gray-400 hover:text-gray-600 rounded\">\n                <XIcon className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            <div className=\"flex border-b border-gray-200\">\n              {['details', 'assign', 'comments'].map((tab) => (\n                <button\n                  key={tab}\n                  onClick={() => setSlideOver(s => ({ ...s, tab }))}\n                  className={cn(\n                    'flex-1 px-4 py-2.5 text-sm font-medium transition-colors',\n                    slideOver.tab === tab\n                      ? 'text-gray-900 border-b-2 border-gray-900'\n                      : 'text-gray-500 hover:text-gray-700'\n                  )}\n                >\n                  {tab.charAt(0).toUpperCase() + tab.slice(1)}\n                </button>\n              ))}\n            </div>\n\n            <div className=\"flex-1 overflow-y-auto p-5\">\n              {slideOver.tab === 'details' && editForm && (\n                <div className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">Title</label>\n                    <Input\n                      value={editForm.title}\n                      onChange={(e) => setEditForm(f => ({ ...f, title: e.target.value }))}\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">Description</label>\n                    <Textarea\n                      value={editForm.description}\n                      onChange={(e) => setEditForm(f => ({ ...f, description: e.target.value }))}\n                      rows={4}\n                    />\n                  </div>\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">Status</label>\n                      <Select\n                        value={editForm.status}\n                        onChange={(e) => setEditForm(f => ({ ...f, status: e.target.value }))}\n                      >\n                        <option value=\"todo\">To Do</option>\n                        <option value=\"in_progress\">In Progress</option>\n                        <option value=\"done\">Done</option>\n                        <option value=\"blocked\">Blocked</option>\n                      </Select>\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1.5\">Priority</label>\n                      <Select\n                        value={editForm.priority}\n                        onChange={(e) => setEditForm(f => ({ ...f, priority: e.target.value }))}\n                      >\n                        <option value=\"low\">Low</option>\n                        <option value=\"medium\">Medium</option>\n                        <option value=\"high\">High</option>\n                        <option value=\"urgent\">Urgent</option>\n                      </Select>\n                    </div>\n                  </div>\n                  <div className=\"flex gap-3 pt-2\">\n                    <Button onClick={saveEdit}>Save Changes</Button>\n                    <Button variant=\"danger\" onClick={() => handleDelete(slideOver.task)}>\n                      Delete Task\n                    </Button>\n                  </div>\n                </div>\n              )}\n\n              {slideOver.tab === 'assign' && (\n                <div className=\"space-y-4\">\n                  {canAssign && (\n                    <div className=\"flex gap-2\">\n                      <Select\n                        value={selectedUserId}\n                        onChange={(e) => setSelectedUserId(e.target.value)}\n                        className=\"flex-1\"\n                      >\n                        <option value=\"\">Select member</option>\n                        {teamMembers.map(m => (\n                          <option key={m[0]} value={m[0]}>{m[4]} ({m[5]})</option>\n                        ))}\n                      </Select>\n                      <Button onClick={assignUser}>Assign</Button>\n                    </div>\n                  )}\n\n                  <div>\n                    <h4 className=\"text-sm font-medium text-gray-700 mb-3\">Assigned Members</h4>\n                    {assignees.length === 0 ? (\n                      <p className=\"text-sm text-gray-500 text-center py-6\">No assignees yet</p>\n                    ) : (\n                      <div className=\"space-y-2\">\n                        {assignees.map((a, idx) => {\n                          const uid = a[1] || a[0];\n                          const label = a[2] || `User ${uid}`;\n                          return (\n                            <div key={`${uid}-${idx}`} className=\"flex items-center justify-between bg-gray-50 rounded-lg p-3\">\n                              <div className=\"flex items-center gap-3\">\n                                <Avatar name={label} size=\"sm\" />\n                                <span className=\"text-sm font-medium text-gray-900\">{label}</span>\n                              </div>\n                              {canAssign && (\n                                <button\n                                  onClick={() => unassignUser(uid)}\n                                  className=\"text-xs text-red-600 hover:text-red-700 font-medium\"\n                                >\n                                  Remove\n                                </button>\n                              )}\n                            </div>\n                          );\n                        })}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              )}\n\n              {slideOver.tab === 'comments' && (\n                <div className=\"space-y-4\">\n                  <div className=\"flex gap-2\">\n                    <Input\n                      placeholder=\"Write a comment...\"\n                      value={commentText}\n                      onChange={(e) => setCommentText(e.target.value)}\n                      onKeyDown={(e) => e.key === 'Enter' && addComment()}\n                    />\n                    <Button onClick={addComment}>Add</Button>\n                  </div>\n\n                  <div className=\"space-y-3\">\n                    {comments.length === 0 ? (\n                      <p className=\"text-sm text-gray-500 text-center py-6\">No comments yet</p>\n                    ) : (\n                      comments.map(c => {\n                        const cid = c[0];\n                        const text = c[2];\n                        const authorId = c[3];\n                        const authorName = c[4] || 'Unknown';\n                        const canEdit = authorId === myUserId;\n\n                        return (\n                          <div key={cid} className=\"bg-gray-50 rounded-lg p-3\">\n                            <div className=\"flex items-start gap-3\">\n                              <Avatar name={authorName} size=\"sm\" />\n                              <div className=\"flex-1 min-w-0\">\n                                <p className=\"text-sm font-medium text-gray-900\">{authorName}</p>\n                                {editingCommentId === cid ? (\n                                  <div className=\"mt-2 space-y-2\">\n                                    <Input\n                                      value={commentEditText}\n                                      onChange={(e) => setCommentEditText(e.target.value)}\n                                    />\n                                    <div className=\"flex gap-2\">\n                                      <Button size=\"sm\" onClick={() => saveEditComment(cid)}>Save</Button>\n                                      <Button\n                                        size=\"sm\"\n                                        variant=\"secondary\"\n                                        onClick={() => { setEditingCommentId(null); setCommentEditText(''); }}\n                                      >\n                                        Cancel\n                                      </Button>\n                                    </div>\n                                  </div>\n                                ) : (\n                                  <>\n                                    <p className=\"text-sm text-gray-600 mt-1\">{text}</p>\n                                    <div className=\"flex gap-3 mt-2\">\n                                      {canEdit && (\n                                        <button\n                                          onClick={() => { setEditingCommentId(cid); setCommentEditText(text); }}\n                                          className=\"text-xs text-gray-500 hover:text-gray-700\"\n                                        >\n                                          Edit\n                                        </button>\n                                      )}\n                                      <button\n                                        onClick={() => deleteComment(cid)}\n                                        className=\"text-xs text-red-500 hover:text-red-700\"\n                                      >\n                                        Delete\n                                      </button>\n                                    </div>\n                                  </>\n                                )}\n                              </div>\n                            </div>\n                          </div>\n                        );\n                      })\n                    )}\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"mt-8\">\n        <Link\n          to={`/teams/${teamId}/projects`}\n          className=\"inline-flex items-center text-sm text-gray-500 hover:text-gray-700\"\n        >\n          <ArrowLeftIcon className=\"w-4 h-4 mr-1.5\" />\n          Back to Projects\n        </Link>\n      </div>\n    </AppLayout>\n  );\n}\n\nfunction ClipboardIcon({ className }) {\n  return (\n    <svg className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n    </svg>\n  );\n}\n\nfunction XIcon({ className }) {\n  return (\n    <svg className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\" />\n    </svg>\n  );\n}\n\nfunction ArrowLeftIcon({ className }) {\n  return (\n    <svg className={className} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\n    </svg>\n  );\n}\n\nexport default Tasks;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}